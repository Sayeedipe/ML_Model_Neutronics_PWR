function [Y,Xf,Af] = ANN_15_15_ss(X,~,~)
%ANN_15_15_SS neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 04-Aug-2025 14:06:05.
% 
% [Y] = ANN_15_15_ss(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.007103819;10.00007172;0.000107052;4.94e-08;0.001122941;1.250013759];
x1_step1.gain = [46.6347784269753;2.06314507196446;20.4357266815152;2000.15881260972;2.00230293269962;1.60010645956305];
x1_step1.ymin = -1;

% Layer 1
b1 = [9.6382884269146682499;2.3386762319689955447;3.1952630668996522267;1.7928933667473632152;-7.3315602529635048867;-17.861622645773604035;-0.28493120513998571042;-0.41129232070120258502;0.50684268347114402875;-1.8450736724684324574;-4.0142079275560966778;-2.1083812162691129011;-6.0913975669412510072;5.9006479423671027718;-2.9186796243458199562];
IW1_1 = [-0.15745894574770369356 -0.025251570307952858618 -0.11384244352632262587 0.13186080207723954727 9.1098772004645063305 0.0025569099207567282453;0.16589238033693345931 0.025782716121932655606 0.0038641471299048586394 0.28590503738230121922 -1.2072692723496185607 -0.79538030476768750709;-0.018627765871486259147 -0.0096134745788623177792 0.13449188483785226578 0.81046893922088958373 -0.77401739948712888761 0.45221159758676326978;-0.021330681881057779459 -0.023764511180280153968 0.023274286855514920991 0.1392190692801535401 1.7477055914457426677 -0.15589020769204103845;-0.061691957549360854074 -0.015999440155566337779 -0.09719945408607252868 0.19597606703718434273 -6.0863960131176693125 0.39482534431897570171;-0.11350168640726110425 -0.022318641578187213559 -16.69171214169287154 0.01411013002242091606 -0.12551310419801109397 -0.31619125241500400936;0.28007186435432696037 0.025069731249615301999 -0.18647543466560856373 -0.0023767970397133393254 -0.23563351487488853886 -0.65233629674003468235;0.43353965570819036346 0.02876074306885775464 0.091884187453527818579 0.06687334724051938184 0.65494738048433998046 0.48325679908497870541;-0.23361574375887780852 -0.033407399054659552007 -0.21550119231987249768 0.11711761112469112889 1.5690174264890506262 0.83101953875116929549;-0.0075772507231050036103 -0.0045280979581821464985 0.026778756202548228971 -0.63023454671454881559 0.77021211227707797597 0.4584424132934430407;-1.7706703378538570792 -0.019151043525745811008 -0.025611131035472939343 -0.29057231115189152693 0.28280784122957386417 0.16185316431045279617;0.011849678074493620247 0.01331580235286273714 -0.036206199698725974323 -0.013161126678099193538 0.037151335494708177809 -0.84881508819850992609;0.38401834350683877739 0.038812331361792393181 -6.4138154764858823498 -0.24322325407752587445 -1.0144397467437669125 -0.68804526320830738939;0.19710478208049198035 0.0192381460145032053 0.072105697376050506553 2.3782212135523361773 -0.96678132500682079087 -0.48282217856210146723;-0.85486831166031973517 0.011976616124361454119 -0.1473624012060497368 0.029823405149798119101 -0.34023410566834366708 -0.34561778247058611013];

% Layer 2
b2 = [-3.9301430313441447773;1.7160399159728509932;-5.9798960691059646066;-1.7461931383522639738;-8.4132401987504401575;-4.0362101970088515301;-4.8812954240145467466;6.4618485616691208051;4.6244604243001123933;0.088918322936973132053;-1.1759817141141746255;9.9124684077826952233;-2.5030933288715719875;-2.3879463627439259099;1.0679345845130414627];
LW2_1 = [-1.7948289901776890432 1.3714326212443042063 4.3550798551996399155 2.1907206268733032672 5.5418845401971514875 0.9741561240995215698 -1.7741528406521129835 4.3564217132706923863 -2.342067631622778201 1.7093976245609241449 0.36331214549444640349 -1.1702321967239948108 0.4700450031936842521 -0.87859436060163298432 2.6231226634811162235;-0.40983145487525174389 -5.0401452591568798312 -2.8895162634802544765 -0.06787315506127575282 -1.2259188522231923013 -1.3284583304754904454 1.0624958812245453021 -1.8129636928076058311 1.4877194173857168913 -1.510235979629677372 0.16243188311557546499 -3.0041002875477640366 -0.33840005678831847069 7.3242016267822602771 1.3076472604040680903;-0.43384268471301351555 2.0617652035404065991 2.3612138968471105827 1.3896550799344160598 0.048222894151882446379 2.3847431463543400376 1.9424960275982265934 4.5407942409865036382 -0.75072984112578367011 0.3574083593656899871 6.1740906978588112608 -1.0882473247576684994 0.40743546992315610167 1.0378210649981760572 3.2299004488106355382;1.9226572683993614632 -0.3455100728071559546 -1.9931457933413041506 1.3468223692349199361 0.22270755906991340778 1.2867530665676387702 1.0275013051319363822 -1.3286921956920170196 0.024675812705637734101 -4.0315321726415360715 -4.261343635135548702 2.260021398146554894 0.19642060047916931609 -1.0792087902905886931 -1.6253119767629256032;5.3842998791071297049 -4.639448453674695827 -0.83229669598877165093 -2.528353564242406204 2.047129593074049847 17.103727656036824101 -6.2123562098380311625 -0.9725837337295702989 7.8369703112829682823 -0.6969865615815693527 -5.003663176873314633 -1.2864643125951615854 11.652512473244870606 -5.7760206572124657143 0.92651609032410042754;1.7759998603057542965 -2.2867592076476124241 3.1911654446360682158 1.7100619046854477201 2.8790874105624104651 1.3325005832401528583 1.5747742259090811157 -1.5155455422978021396 2.5410549187927133907 2.0679757425150997463 -2.3626397911416239239 0.26510414847885532819 -0.11234992583230916929 -3.1711184598805632895 -3.9880629281598780622;1.7265973902708677823 -4.443633033977789637 -0.67734505498220498598 3.1614974960204946797 -3.6579162164134175761 0.0026398625072951860913 -1.0568397180423316772 1.057946374786684407 1.1281791724193230841 -6.196344026239085423 4.2043970040719571557 -7.3841809006168448448 -0.15782043481805460572 5.4635834053415779366 4.9748708665770200454;-2.9642044590955363148 1.1702131497638363911 -1.9273426783917610994 -0.45275107098479921985 0.41772277119615247587 -3.7593470754114779453 -2.4394280145411459948 0.86303132252440473149 1.3449128148672839789 -1.9663723923448146458 -0.45656817217226997041 -2.9966990005086979743 -0.84875143678525333257 -2.2801789501260287807 0.53711414731812445744;5.3984071307905168169 -2.0435870610802573388 2.7244053389786428987 -9.1090111999676874888 1.2139942702893087301 0.83538323584720208803 -0.60712316447023839672 2.4581337184126996753 -3.0185724256587418424 -1.6050146195128320858 -0.053997951009463605876 -4.0558569602941583199 0.49382399660983966605 1.5868083892386195544 4.4275647361218988252;-3.6533410367436132127 -1.5196324645582766077 -0.3969412828396108317 -4.9026738018506845762 5.0669194832952824115 2.8846416518721063049 5.7445736406552097009 -1.5665887150969814989 0.25017116806071026947 1.1447495308845734296 -3.2646662532299393078 2.4955170140282376678 0.2942232691237489095 3.5685164629410852655 1.3882757409374464341;0.070262017038221200038 -4.7639381210297697677 -0.48177311593129890088 1.7718217491387797669 -4.3443212271866613605 -0.66255803692480697009 1.669877503324314949 -1.254392408110154955 1.7963388342119857022 -1.5543232750708488865 -5.6929494678350822667 -5.9647149433568271704 -0.092378200896951839782 5.8674284999583772304 -2.0745685443152757088;2.7412171629641055581 -1.1444845795584288606 0.59291652867754396361 -1.6252556234148562986 -4.5395113416245962412 0.87876991947591853727 -7.8469191402844149508 4.5880483012931421172 -2.8415527541751406382 -5.132357200746257675 2.1625744527054555633 -2.3535254512791476955 0.085028545837461402823 -1.8478155120699690794 1.8433731425678316906;0.54168203532486147722 2.2890583318413271208 -1.7405260592077540505 1.1377182358171700205 1.7482942493611131063 -2.462114941091014142 1.9108088296640268755 0.35617601708725304954 -1.4101489765278225619 -2.2572802016445581152 -3.5175128001251709797 2.033508443421599754 0.31110168749766803353 4.1851682837905945789 -1.1024301039825941118;-10.656539151303057622 -1.6430906191897041158 4.3856249813032750495 -2.7310843767708639085 13.470546193589118644 1.3631206732118394953 2.2514485243761774846 -8.002724516110969688 0.80848808036710784197 1.6561759371947568642 -9.9654244561878009279 -1.4241622900517132422 0.47540158798971737797 2.236592216364616359 -1.7271830916573973624;-3.3336331442466011765 -1.2654087965027163154 0.9902750354329019622 -5.5127079000718683943 4.9344204999257810229 2.5010855346434541779 4.5087801950947499208 -1.0417287044818857034 -1.8594947832916959296 0.63451674223594023427 -3.0585839286684737282 1.4667611890222935767 0.29673504602189049173 2.1618655723334132546 1.3757926624412115668];

% Layer 3
b3 = [0.42055000063589775827;0.42093431962601457474];
LW3_2 = [-0.78584026817575147739 -3.4881758889620089192 2.7539220731733609071 -4.1968797604026413239 4.8216514118741367056 1.3889526377402239277 -2.6371507735524271077 0.58713130551917891431 0.93147759194404378125 2.4036759472458069098 3.024737531971097404 -2.8384639725679998712 0.62967775119489510782 -5.3120322708826117619 -2.4307029758100773265;-0.78607806338811536673 -3.4879536516976563654 2.7552368380720793084 -4.1971514762295418777 4.8224182020643864277 1.3883326543068736925 -2.6371480115163774549 0.58715797605395747549 0.93124044456432841788 2.4037920181647267626 3.0247352451154441155 -2.8388392023972581768 0.62860822126601778592 -5.3074464750951717562 -2.4306756356394991769];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.68941683382693;1.69016186306637];
y1_step1.xoffset = [0.14518;0.145];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = logsig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Layer 3
    a3 = repmat(b3,1,Q) + LW3_2*a2;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a3,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(3,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n,~)
  a = 1 ./ (1 + exp(-n));
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
